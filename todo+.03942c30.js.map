{"mappings":"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","sources":["<anon>","src/script.js"],"sourcesContent":["var $b63be9b0371e788c$exports = {};\nconst $b63be9b0371e788c$var$TASKSADRESS = 'https://696f53afa06046ce618642cd.mockapi.io/tasks';\nconst $b63be9b0371e788c$var$PURCHASESADRESS = 'https://696f53afa06046ce618642cd.mockapi.io/purchases';\nwindow.addEventListener('DOMContentLoaded', ()=>{\n    let itemsList = [];\n    let editId = null;\n    let currentAdress = $b63be9b0371e788c$var$PURCHASESADRESS;\n    const header = document.querySelector('.header');\n    const container = document.querySelector('.container');\n    const title = document.querySelector('.title');\n    const loader = document.querySelector('.loader');\n    const data = document.querySelector('.data__input');\n    const save = document.querySelector('.data__btn');\n    const items = document.querySelector('.items');\n    async function getList(adress) {\n        title.textContent = adress === $b63be9b0371e788c$var$TASKSADRESS ? \"\\u041D\\u0430\\u0434\\u043E \\u0441\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C:\" : \"\\u041D\\u0430\\u0434\\u043E \\u043A\\u0443\\u043F\\u0438\\u0442\\u044C:\";\n        loader.classList.remove('not-view');\n        try {\n            const response = await fetch(adress);\n            if (!response.ok) throw new Error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\\u0430\");\n            const dataList = await response.json();\n            if (dataList) {\n                itemsList = [];\n                dataList.forEach((item)=>{\n                    item.important ? itemsList.unshift(item) : itemsList.push(item);\n                });\n            }\n            renderItems();\n        } catch (error) {\n            console.error(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A\");\n        } finally{\n            loader.classList.add('not-view');\n        }\n    }\n    function renderItems() {\n        items.innerHTML = '';\n        itemsList.forEach((item, i)=>{\n            const itemText = `${item.text.slice(0, 1).toUpperCase()}${item.text.slice(1)}`;\n            const itemBlock = document.createElement('div');\n            itemBlock.setAttribute('id', item.id);\n            itemBlock.classList.add('items__block');\n            const itemsBlockTitle = document.createElement('span');\n            itemsBlockTitle.classList.add('items__block--title');\n            itemsBlockTitle.textContent = `${i + 1}. ${itemText}`;\n            const important = document.createElement('span');\n            important.classList.add('important');\n            important.innerHTML = item.important ? \"\\u2605\" : \"\\u2606\";\n            if (item.important) important.classList.add('active');\n            const del = document.createElement('span');\n            del.classList.add('del');\n            const change = document.createElement('span');\n            change.classList.add('change');\n            change.innerHTML = '&#9999';\n            itemBlock.append(change, itemsBlockTitle, important, del);\n            items.append(itemBlock);\n        });\n        data.value = '';\n        items.classList.remove('faded');\n    }\n    async function setItem(adress) {\n        try {\n            if (editId !== null) {\n                if (data.value.trim() === '') {\n                    data.focus();\n                    return;\n                }\n                await changeItemText(currentAdress, editId, data.value);\n                save.textContent = \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\";\n                editId = null;\n            } else if (data.value === '') data.focus();\n            else {\n                const item = data.value;\n                const response = await fetch(adress, {\n                    method: 'POST',\n                    headers: {\n                        'content-type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        text: item\n                    })\n                });\n                if (!response.ok) throw new Error(\"'\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0430 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440'\");\n                await getList(adress);\n            }\n        } catch (error) {\n            console.error(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0430 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\");\n        }\n    }\n    async function deleteItem(adress, taskId) {\n        try {\n            const response = await fetch(`${adress}/${taskId}`, {\n                method: 'DELETE'\n            });\n            if (!response.ok) throw new Error(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0437\\u0430\\u0434\\u0430\\u0447\\u0443\");\n            await getList(adress);\n        } catch (error) {\n            console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0438:\", error);\n            alert(\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0438 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438. \\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u0441\\u043E\\u0435\\u0434\\u0438\\u043D\\u0435\\u043D\\u0438\\u0435.\");\n        }\n    }\n    async function madeImportant(adress, taskId, status) {\n        try {\n            const response = await fetch(`${adress}/${taskId}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    important: status\n                })\n            });\n            if (!response.ok) throw new Error(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\");\n            await getList(adress);\n        } catch (error) {\n            console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0432\\u0430\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438:\", error);\n        // Здесь можно не выводить alert, чтобы не надоедать пользователю, \n        // но в консоли мы увидим, что пошло не так.\n        }\n    }\n    async function changeItemText(adress, taskId, itemText) {\n        try {\n            const response = await fetch(`${adress}/${taskId}`, {\n                method: 'PUT',\n                headers: {\n                    'content-type': 'application/json'\n                },\n                body: JSON.stringify({\n                    text: itemText\n                })\n            });\n            if (!response.ok) throw new Error(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0442\\u0435\\u043A\\u0441\\u0442\");\n            await getList(adress);\n        } catch (error) {\n            console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0438:\", error);\n            alert(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F.\");\n        }\n    }\n    document.addEventListener('click', (e)=>{\n        const el = e.target;\n        const parent = el.closest('.items__block');\n        if (!parent) return;\n        const id = parent.getAttribute('id');\n        if (el.classList.contains('del')) {\n            parent.classList.add('delete');\n            deleteItem(currentAdress, id);\n        }\n        if (el.classList.contains('important')) {\n            el.classList.toggle('active');\n            const status = el.classList.contains('active');\n            el.innerHTML = status ? \"\\u2605\" : \"\\u2606\";\n            madeImportant(currentAdress, id, status);\n        }\n        if (el.classList.contains('items__block--title')) el.classList.toggle('expanded');\n        if (el.classList.contains('change')) {\n            editId = id;\n            data.value = itemsList.find((item)=>item.id === editId).text;\n            save.textContent = \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\";\n            data.focus();\n        }\n    });\n    save.onclick = ()=>setItem(currentAdress);\n    data.onkeydown = (e)=>{\n        if (e.key === 'Enter') setItem(currentAdress);\n    };\n    header.addEventListener('click', (e)=>{\n        editId = null;\n        save.textContent = \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\";\n        data.value = '';\n        const isTasks = e.target.classList.contains('tasks');\n        const isPurchases = e.target.classList.contains('purchases');\n        if (!isTasks && !isPurchases) return;\n        document.querySelectorAll('.view').forEach((tab)=>{\n            tab.classList.remove('active');\n        });\n        e.target.classList.add('active');\n        const mainTitle = document.querySelector('.main-title');\n        mainTitle.classList.add('hidden');\n        container.classList.remove('hidden');\n        items.classList.add('faded');\n        setTimeout(()=>{\n            currentAdress = isTasks ? $b63be9b0371e788c$var$TASKSADRESS : $b63be9b0371e788c$var$PURCHASESADRESS;\n            getList(currentAdress);\n        }, 300);\n    });\n});\n\n\n//# sourceMappingURL=todo+.03942c30.js.map\n","const TASKSADRESS = 'https://696f53afa06046ce618642cd.mockapi.io/tasks';\nconst PURCHASESADRESS = 'https://696f53afa06046ce618642cd.mockapi.io/purchases';\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  let itemsList = [];\n  let editId = null;\n  let currentAdress = PURCHASESADRESS;\n\n  const header = document.querySelector('.header');\n  const container = document.querySelector('.container');\n  const title = document.querySelector('.title');\n  const loader = document.querySelector('.loader');\n  const data = document.querySelector('.data__input');\n  const save = document.querySelector('.data__btn');\n  const items = document.querySelector('.items');\n\n  async function getList(adress) {\n    title.textContent = adress === TASKSADRESS\n      ? 'Надо сделать:'\n      : 'Надо купить:';\n\n    loader.classList.remove('not-view');\n\n    try {\n      const response = await fetch(adress);\n\n      if (!response.ok) {\n        throw new Error(\"Ошибка сервера\");\n      }\n\n      const dataList = await response.json();\n\n      if (dataList) {\n        itemsList = [];\n        dataList.forEach(item => {\n          item.important ? itemsList.unshift(item) : itemsList.push(item);\n        });\n      };\n\n      renderItems();\n    } catch (error) {\n      console.error('Не удалось загрузить список');\n    } finally {\n      loader.classList.add('not-view');\n    }\n  };\n\n  function renderItems() {\n    items.innerHTML = '';\n    itemsList.forEach((item, i) => {\n      const itemText = `${item.text.slice(0, 1).toUpperCase()}${item.text.slice(1)}`;\n\n      const itemBlock = document.createElement('div');\n      itemBlock.setAttribute('id', item.id);\n      itemBlock.classList.add('items__block');\n\n      const itemsBlockTitle = document.createElement('span');\n      itemsBlockTitle.classList.add('items__block--title');\n      itemsBlockTitle.textContent = `${i + 1}. ${itemText}`;\n\n      const important = document.createElement('span');\n      important.classList.add('important');\n      important.innerHTML = item.important ? '★' : '☆';\n\n      if (item.important) {\n        important.classList.add('active');\n      }\n\n      const del = document.createElement('span');\n      del.classList.add('del');\n\n      const change = document.createElement('span');\n      change.classList.add('change');\n      change.innerHTML = '&#9999';\n\n      itemBlock.append(change, itemsBlockTitle, important, del);\n      items.append(itemBlock);\n    });\n\n    data.value = '';\n\n    items.classList.remove('faded');\n  };\n\n\n  async function setItem(adress) {\n    try {\n      if (editId !== null) {\n        if (data.value.trim() === '') {\n          data.focus();\n          return;\n        }\n        await changeItemText(currentAdress, editId, data.value);\n        save.textContent = 'Сохранить';\n        editId = null;\n      } else {\n        if (data.value === '') {\n          data.focus();\n        } else {\n          const item = data.value;\n\n          const response = await fetch(adress, {\n            method: 'POST',\n            headers: { 'content-type': 'application/json' },\n            body: JSON.stringify({ text: item })\n          });\n\n          if (!response.ok) {\n            throw new Error(\"'Не удалось отправить данные на сервер'\");\n\n          }\n          await getList(adress);\n        }\n      }\n    } catch (error) {\n      console.error('Не удалось отправить данные на сервер')\n    }\n  }\n\n  async function deleteItem(adress, taskId) {\n    try {\n      const response = await fetch(`${adress}/${taskId}`, {\n        method: 'DELETE'\n      });\n\n      if (!response.ok) throw new Error('Не удалось удалить задачу');\n\n      await getList(adress);\n    } catch (error) {\n      console.error('Ошибка при удалении:', error);\n      alert('Произошла ошибка при удалении задачи. Проверьте соединение.');\n    }\n  };\n\n  async function madeImportant(adress, taskId, status) {\n    try {\n      const response = await fetch(`${adress}/${taskId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ important: status })\n      });\n\n      if (!response.ok) throw new Error('Не удалось обновить статус');\n\n      await getList(adress);\n    } catch (error) {\n      console.error('Ошибка изменения важности:', error);\n      // Здесь можно не выводить alert, чтобы не надоедать пользователю, \n      // но в консоли мы увидим, что пошло не так.\n    }\n  };\n\n  async function changeItemText(adress, taskId, itemText) {\n    try {\n      const response = await fetch(`${adress}/${taskId}`, {\n        method: 'PUT',\n        headers: { 'content-type': 'application/json' },\n        body: JSON.stringify({ text: itemText })\n      });\n\n      if (!response.ok) throw new Error('Не удалось изменить текст');\n\n      await getList(adress);\n    } catch (error) {\n      console.error('Ошибка при редактировании:', error);\n      alert('Не удалось сохранить изменения.');\n    }\n  }\n\n  document.addEventListener('click', (e) => {\n    const el = e.target;\n    const parent = el.closest('.items__block');\n\n    if (!parent) return;\n\n    const id = parent.getAttribute('id');\n\n    if (el.classList.contains('del')) {\n      parent.classList.add('delete');\n      deleteItem(currentAdress, id);\n    }\n\n    if (el.classList.contains('important')) {\n      el.classList.toggle('active');\n      const status = el.classList.contains('active');\n      el.innerHTML = status ? '★' : '☆';\n      madeImportant(currentAdress, id, status);\n    }\n\n    if (el.classList.contains('items__block--title')) {\n      el.classList.toggle('expanded');\n    }\n\n    if (el.classList.contains('change')) {\n      editId = id;\n      data.value = itemsList.find(item => item.id === editId).text;\n      save.textContent = 'Обновить';\n      data.focus();\n    }\n  });\n\n  save.onclick = () => setItem(currentAdress);\n  data.onkeydown = (e) => {\n    if (e.key === 'Enter') {\n      setItem(currentAdress);\n    }\n  };\n\n  header.addEventListener('click', (e) => {\n    editId = null;\n    save.textContent = 'Сохранить';\n    data.value = '';\n\n    const isTasks = e.target.classList.contains('tasks');\n    const isPurchases = e.target.classList.contains('purchases');\n\n    if (!isTasks && !isPurchases) return;\n\n    document.querySelectorAll('.view').forEach(tab => {\n      tab.classList.remove('active');\n    });\n\n    e.target.classList.add('active')\n\n\n    const mainTitle = document.querySelector('.main-title');\n    mainTitle.classList.add('hidden');\n    container.classList.remove('hidden');\n\n    items.classList.add('faded');\n\n    setTimeout(() => {\n      currentAdress = isTasks ? TASKSADRESS : PURCHASESADRESS;\n      getList(currentAdress);\n    }, 300);\n  }\n  );\n});\n\n"],"names":["$b63be9b0371e788c$var$TASKSADRESS","$b63be9b0371e788c$var$PURCHASESADRESS","window","addEventListener","itemsList","editId","currentAdress","header","document","querySelector","container","title","loader","data","save","items","getList","adress","textContent","classList","remove","response","fetch","ok","Error","dataList","json","forEach","item","important","unshift","push","innerHTML","i","itemText","text","slice","toUpperCase","itemBlock","createElement","setAttribute","id","add","itemsBlockTitle","del","change","append","value","error","console","setItem","trim","focus","changeItemText","method","headers","body","JSON","stringify","deleteItem","taskId","alert","madeImportant","status","e","el","target","parent","closest","getAttribute","contains","toggle","find","onclick","onkeydown","key","isTasks","isPurchases","querySelectorAll","tab","mainTitle","setTimeout"],"version":3,"file":"todo+.03942c30.js.map"}