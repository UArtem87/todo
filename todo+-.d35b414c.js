let t="https://696f53afa06046ce618642cd.mockapi.io/tasks",e="https://696f53afa06046ce618642cd.mockapi.io/purchases";window.addEventListener("DOMContentLoaded",()=>{let a=[],s=e,c=document.querySelector(".header"),n=document.querySelector(".container"),i=document.querySelector(".title"),o=document.querySelector(".loader"),d=document.querySelector(".data__input"),l=document.querySelector(".data__btn"),r=document.querySelector(".items");async function m(e){e===t?i.textContent="Надо сделать:":i.textContent="Надо купить:",o.classList.remove("not-view");let s=await fetch(e),c=await s.json();c?(a=c,o.classList.add("not-view"),r.innerHTML="",a.forEach((t,e)=>{let a=`${t.text.slice(0,1).toUpperCase()}${t.text.slice(1)}`,s=document.createElement("div");s.setAttribute("id",t.id),s.classList.add("items__block");let c=document.createElement("span");c.classList.add("items__block--title"),c.textContent=`${e+1}. ${a}`;let n=document.createElement("span");n.classList.add("important"),n.innerHTML=t.important?"★":"☆",t.important&&n.classList.add("active");let i=document.createElement("span");i.classList.add("del"),s.append(c,n,i),r.append(s)}),d.value="",r.classList.remove("faded")):a=[]}async function u(t){if(""===d.value)d.focus();else{let e=d.value;await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({text:e})}),m(t)}}async function L(t,e){await fetch(`${t}/${e}`,{method:"DELETE"}),m(t)}async function p(t,e,a){await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({important:a})})}document.addEventListener("click",t=>{let e=t.target,a=e.closest(".items__block");if(!a)return;let c=a.getAttribute("id");if(e.classList.contains("del")&&L(s,c),e.classList.contains("important")){e.classList.toggle("active");let t=e.classList.contains("active");e.innerHTML=t?"★":"☆",p(s,c,t)}e.classList.contains("items__block--title")&&e.classList.toggle("expanded")}),l.onclick=()=>u(s),d.onkeydown=t=>{"Enter"===t.key&&u(s)},c.addEventListener("click",a=>{let c=a.target.classList.contains("tasks"),i=a.target.classList.contains("purchases");(c||i)&&(document.querySelectorAll(".view").forEach(t=>{t.classList.remove("active")}),a.target.classList.add("active"),document.querySelector(".main-title").classList.add("hidden"),n.classList.remove("hidden"),r.classList.add("faded"),setTimeout(()=>{m(s=c?t:e)},300))})});
//# sourceMappingURL=todo+-.d35b414c.js.map
