let t="https://696f53afa06046ce618642cd.mockapi.io/tasks",e="https://696f53afa06046ce618642cd.mockapi.io/purchases";window.addEventListener("DOMContentLoaded",()=>{let a=[],s=e,n=document.querySelector(".header"),c=document.querySelector(".container"),i=document.querySelector(".title"),o=document.querySelector(".loader"),d=document.querySelector(".data__input"),l=document.querySelector(".data__btn"),r=document.querySelector(".items");async function m(e){e===t?i.textContent="Надо сделать:":i.textContent="Надо купить:",o.classList.remove("not-view");let s=await fetch(e),n=await s.json();n?(a=[],n.forEach(t=>{t.important?a.unshift(t):a.push(t)}),o.classList.add("not-view"),r.innerHTML="",a.forEach((t,e)=>{let a=`${t.text.slice(0,1).toUpperCase()}${t.text.slice(1)}`,s=document.createElement("div");s.setAttribute("id",t.id),s.classList.add("items__block");let n=document.createElement("span");n.classList.add("items__block--title"),n.textContent=`${e+1}. ${a}`;let c=document.createElement("span");c.classList.add("important"),c.innerHTML=t.important?"★":"☆",t.important&&c.classList.add("active");let i=document.createElement("span");i.classList.add("del"),s.append(n,c,i),r.append(s)}),d.value="",r.classList.remove("faded")):a=[]}async function u(t){if(""===d.value)d.focus();else{let e=d.value;await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({text:e})}),m(t)}}async function p(t,e){await fetch(`${t}/${e}`,{method:"DELETE"}),m(t)}async function L(t,e,a){await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({important:a})}),m(t)}document.addEventListener("click",t=>{let e=t.target,a=e.closest(".items__block");if(!a)return;let n=a.getAttribute("id");if(e.classList.contains("del")&&p(s,n),e.classList.contains("important")){e.classList.toggle("active");let t=e.classList.contains("active");e.innerHTML=t?"★":"☆",L(s,n,t)}e.classList.contains("items__block--title")&&e.classList.toggle("expanded")}),l.onclick=()=>u(s),d.onkeydown=t=>{"Enter"===t.key&&u(s)},n.addEventListener("click",a=>{let n=a.target.classList.contains("tasks"),i=a.target.classList.contains("purchases");(n||i)&&(document.querySelectorAll(".view").forEach(t=>{t.classList.remove("active")}),a.target.classList.add("active"),document.querySelector(".main-title").classList.add("hidden"),c.classList.remove("hidden"),r.classList.add("faded"),setTimeout(()=>{m(s=n?t:e)},300))})});
//# sourceMappingURL=todo+.a3bda5f5.js.map
