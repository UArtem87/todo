let t="https://696f53afa06046ce618642cd.mockapi.io/tasks",e="https://696f53afa06046ce618642cd.mockapi.io/purchases";window.addEventListener("DOMContentLoaded",()=>{let s=[],a=e,c=document.querySelector(".header"),n=document.querySelector(".container"),i=document.querySelector(".title"),o=document.querySelector(".loader"),d=document.querySelector(".data__input"),l=document.querySelector(".data__btn"),r=document.querySelector(".items");async function m(e){e===t?i.textContent="Надо сделать:":i.textContent="Надо купить:",o.classList.remove("not-view");let a=await fetch(e),c=await a.json();c?(s=[],c.forEach(t=>{t.important?s.unshift(t):s.push(t)}),o.classList.add("not-view"),r.innerHTML="",s.forEach((t,e)=>{let s=`${t.text.slice(0,1).toUpperCase()}${t.text.slice(1)}`,a=document.createElement("div");a.setAttribute("id",t.id),a.classList.add("items__block");let c=document.createElement("span");c.classList.add("items__block--title"),c.textContent=`${e+1}. ${s}`;let n=document.createElement("span");n.classList.add("important"),n.innerHTML=t.important?"★":"☆",t.important&&n.classList.add("active");let i=document.createElement("span");i.classList.add("del"),a.append(c,n,i),r.append(a)}),d.value="",r.classList.remove("faded")):s=[]}async function u(t){if(""===d.value)d.focus();else{let e=d.value;await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({text:e})}),m(t)}}async function p(t,e){await fetch(`${t}/${e}`,{method:"DELETE"}),m(t)}async function L(t,e,s){await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({important:s})}),m(t)}document.addEventListener("click",t=>{let e=t.target,s=e.closest(".items__block");if(!s)return;let c=s.getAttribute("id");if(e.classList.contains("del")&&(s.classList.add("delete"),p(a,c)),e.classList.contains("important")){e.classList.toggle("active");let t=e.classList.contains("active");e.innerHTML=t?"★":"☆",L(a,c,t)}e.classList.contains("items__block--title")&&e.classList.toggle("expanded")}),l.onclick=()=>u(a),d.onkeydown=t=>{"Enter"===t.key&&u(a)},c.addEventListener("click",s=>{let c=s.target.classList.contains("tasks"),i=s.target.classList.contains("purchases");(c||i)&&(document.querySelectorAll(".view").forEach(t=>{t.classList.remove("active")}),s.target.classList.add("active"),document.querySelector(".main-title").classList.add("hidden"),n.classList.remove("hidden"),r.classList.add("faded"),setTimeout(()=>{m(a=c?t:e)},300))})});
//# sourceMappingURL=todo+.e3673e2a.js.map
