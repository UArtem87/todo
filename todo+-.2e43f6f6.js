let t="https://696f53afa06046ce618642cd.mockapi.io/tasks",e="https://696f53afa06046ce618642cd.mockapi.io/purchases";window.addEventListener("DOMContentLoaded",()=>{let s=[],a=e,n=document.querySelector(".header"),c=document.querySelector(".container"),i=document.querySelector(".title"),o=document.querySelector(".loader"),d=document.querySelector(".data__input"),l=document.querySelector(".data__btn"),r=document.querySelector(".items");async function m(e){e===t?i.textContent="Надо сделать:":i.textContent="Надо купить:",o.classList.remove("not-view");let a=await fetch(e),n=await a.json();n?(s=n,o.classList.add("not-view"),r.innerHTML="",s.forEach((t,e)=>{let s=`${t.text.slice(0,1).toUpperCase()}${t.text.slice(1)}`,a=document.createElement("div");a.setAttribute("id",t.id),a.classList.add("items__block");let n=document.createElement("span");n.classList.add("items__block--title"),n.textContent=`${e+1}. ${s}`;let c=document.createElement("span");c.classList.add("important"),c.innerHTML=t.important?"★":"☆",t.important&&c.classList.add("active");let i=document.createElement("span");i.classList.add("del"),a.append(n,c,i),r.append(a)}),d.value="",r.classList.remove("faded")):s=[]}async function u(t){if(""===d.value)d.focus();else{let e=d.value;await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({text:e})}),m(t)}}async function p(t,e){await fetch(`${t}/${e}`,{method:"DELETE"}),m(t)}async function L(t,e,s){await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({important:s})})}document.addEventListener("click",t=>{let e=t.target,s=e.closest(".items__block");if(!s)return;let n=s.getAttribute("id");if(e.classList.contains("del")&&p(a,n),e.classList.contains("important")){e.classList.toggle("active");let t=e.classList.contains("active");e.innerHTML=t?"★":"☆",L(a,n,t)}e.classList.contains("items__block--title")&&e.classList.toggle("expanded")}),l.onclick=()=>u(a),d.onkeydown=t=>{"Enter"===t.key&&u(a)},n.addEventListener("click",s=>{let n=s.target.classList.contains("tasks"),i=s.target.classList.contains("purchases");(n||i)&&(document.querySelector(".main-title").classList.add("hidden"),c.classList.remove("hidden"),r.classList.add("faded"),setTimeout(()=>{m(a=n?t:e)},300))})});
//# sourceMappingURL=todo+-.2e43f6f6.js.map
